locals {
  byoc_manager_actions = concat([
    "secretsmanager:PutSecretValue",
    "secretsmanager:GetSecretValue",
    "secretsmanager:GetResourcePolicy",
    "secretsmanager:DescribeSecret",
    "secretsmanager:DeleteSecret",
    "secretsmanager:CreateSecret",
    "route53domains:*",
    "route53:*",
    "logs:TagResource",
    "logs:PutRetentionPolicy",
    "logs:ListTagsForResource",
    "logs:DescribeLogGroups",
    "logs:CreateLogGroup",
    "logs:DeleteLogGroup",
    "kms:*",
    "iam:TagRole",
    "iam:TagPolicy",
    "iam:TagOpenIDConnectProvider",
    "iam:RemoveRoleFromInstanceProfile",
    "iam:PassRole",
    "iam:CreatePolicyVersion",
    "iam:SetDefaultPolicyVersion",
    "iam:DeletePolicyVersion",
    "iam:ListRoles",
    "iam:ListRolePolicies",
    "iam:ListPolicyVersions",
    "iam:ListInstanceProfilesForRole",
    "iam:ListAttachedRolePolicies",
    "iam:GetRole",
    "iam:GetPolicyVersion",
    "iam:GetPolicy",
    "iam:GetOpenIDConnectProvider",
    "iam:DetachRolePolicy",
    "iam:DeleteRole",
    "iam:DeletePolicy",
    "iam:DeleteOpenIDConnectProvider",
    "iam:CreateServiceLinkedRole",
    "iam:CreateRole",
    "iam:CreatePolicy",
    "iam:CreateOpenIDConnectProvider",
    "iam:AttachRolePolicy",
    "iam:UpdateAssumeRolePolicy",
    "elasticloadbalancing:*",
    "eks:*",
    "ecr:DescribePullThroughCacheRules",
    "ecr:DeletePullThroughCacheRule",
    "ecr:CreatePullThroughCacheRule",
    "ec2:*",
    "autoscaling:DetachLoadBalancerTargetGroups",
    "autoscaling:DescribeAutoScalingGroups",
    "autoscaling:AttachLoadBalancerTargetGroups"
  ], var.byoc_manager_additional_actions)
  bucket_terraform_state = var.bucket_terraform_state != "" ? var.bucket_terraform_state : "littlehorse-byoc-terraform-state"
}
